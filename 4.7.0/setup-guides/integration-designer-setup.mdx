---
title: Integration Designer setup guide
description: Set up and configure the FlowX.AI Integration Designer service with step-by-step instructions for database connections, Kafka configuration, authentication settings, and troubleshooting.
icon: arrow-progress
---

<Info>
This guide explains how to set up the Integration Designer service for the FlowX.AI platform. Follow these instructions to configure all required components for enabling REST API integrations with external systems.
</Info>

## Overview

The Integration Designer service lets you create and manage integrations between FlowX.AI and external systems using a visual interface. Use it to define data models, create workflows, and configure API endpoints.


## Prerequisites

Before you begin, set up these required components:

| Component     | Minimum Version | Purpose                                            |
| ------------- | --------------- | -------------------------------------------------- |
| PostgreSQL    | 13              | Stores advancing data source information           |
| MongoDB       | 4.4             | Stores integration configurations and runtime data |
| Kafka         | 2.8             | Handles communication between services             |
| OAuth2 Server | Keycloak 22+    | Manages authentication (Keycloak recommended)      |

<Info>
You need two MongoDB databases:
- `integration-designer`: Stores service-specific configurations
- `app-runtime`: Shared database for runtime data across services
</Info>

## Step 1: Configure databases

### Set up PostgreSQL

Configure PostgreSQL for advancing data with these environment variables:

```yaml
# PostgreSQL settings
- name: ADVANCING_DATASOURCE_URL
  value: jdbc:postgresql://<host>:<port>/<database-name>
- name: ADVANCING_DATASOURCE_USERNAME
  value: <username>
- name: ADVANCING_DATASOURCE_PASSWORD
  valueFrom:
    secretKeyRef:
      name: integration-designer-secrets
      key: advancing-datasource-password
- name: ADVANCING_DATASOURCE_DRIVER_CLASS_NAME
  value: org.postgresql.Driver  # Use oracle.jdbc.OracleDriver for Oracle
```

### Set up MongoDB

Configure both required MongoDB databases:

```yaml
# Primary MongoDB database
- name: SPRING_DATA_MONGODB_URI
  value: mongodb://${DB_USERNAME}:${DB_PASSWORD}@<host1>,<host2>:<port>/${DB_NAME}?retryWrites=false
- name: DB_USERNAME
  value: integration-designer
- name: DB_NAME
  value: integration-designer
- name: DB_PASSWORD
  valueFrom:
    secretKeyRef:
      name: integration-designer-secrets
      key: mongodb-password

# Shared runtime MongoDB database
- name: SPRING_DATA_MONGODB_RUNTIME_URI
  value: mongodb://${RUNTIME_DB_USERNAME}:${RUNTIME_DB_PASSWORD}@<host1>,<host2>:<port>/${RUNTIME_DB_NAME}?retryWrites=false
- name: RUNTIME_DB_USERNAME
  value: app-runtime
- name: RUNTIME_DB_NAME
  value: app-runtime
- name: RUNTIME_DB_PASSWORD
  valueFrom:
    secretKeyRef:
      name: integration-designer-secrets
      key: runtime-mongodb-password
```

<Warning>
The service won't start without a working runtime MongoDB connection.
</Warning>

For Azure Cosmos DB, add:

```yaml
- name: SPRING_DATA_MONGODB_STORAGE
  value: cosmosdb  # Use 'mongodb' for standard MongoDB
```

## Step 2: Set up Kafka connection

Kafka is essential for event-driven communication between the Integration Designer and other FlowX.AI microservices. Configure Kafka with the following settings:

### Basic Kafka configuration

```yaml
# Kafka Connection
- name: SPRING_KAFKA_BOOTSTRAP_SERVERS
  value: <kafka-host1>:<port>,<kafka-host2>:<port>

# Environment and Topic Creation Settings
- name: KAFKA_TOPIC_NAMING_ENVIRONMENT
  value: dev  # Use appropriate environment identifier (dev, test, prod, etc.)
- name: FLOWX_WORKFLOW_CREATETOPICS
  value: "false"  # Set to "true" for development environments to auto-create topics
```

### Kafka consumer settings

```yaml
# Kafka Consumer Configuration
- name: KAFKA_CONSUMER_GROUP_ID_START_WORKFLOWS
  value: start-workflows-group
- name: KAFKA_CONSUMER_THREADS_START_WORKFLOWS
  value: "3"
- name: KAFKA_AUTH_EXCEPTION_RETRY_INTERVAL
  value: "10"  # Retry interval in seconds after AuthorizationException
```

### Configure Kafka topics

Integration Designer uses structured Kafka topic names for communication. Understanding how these topics are named is important for proper configuration.

#### How topic names are built

Kafka topic names follow this structure:
```
[package][environment][service][action][entity][version]
```

Example: `ai.flowx.dev.eventsgateway.receive.workflowinstances.v1`

These components make up the topic name:

| Component | Variable Name | Description | Example Value |
|-----------|---------------|-------------|---------------|
| Package | `kafka.topic.naming.package` | Base namespace | `ai.flowx.` |
| Environment | `kafka.topic.naming.environment` | Your deployment environment | `dev.` |
| Version | `kafka.topic.naming.version` | Topic version | `.v1` |
| Separator | `kafka.topic.naming.separator` | Main separator | `.` |
| Secondary separator | `kafka.topic.naming.separator2` | Alternative separator | `-` |

#### Service patterns used

Integration Designer works with these specific patterns:

**Engine pattern**
- Variable: `kafka.topic.naming.engineReceivePattern`
- Pattern: `engine.receive.`
- Example: `ai.flowx.dev.engine.receive.*`
- Purpose: Receives messages for the engine service

**Integration Pattern**
- Variable: `kafka.topic.naming.integrationReceivePattern`
- Pattern: `integration.receive.`
- Example: `ai.flowx.dev.integration.receive.*`
- Purpose: Receives messages for the integration service

<Info>
Important: The engine pattern in Process Engine corresponds to the integration pattern in Integration Designer.
</Info>

#### Required topics

Make sure these topics exist:

**Workflow Instances Topic**
- Full name pattern: `ai.flowx.dev.eventsgateway.receive.workflowinstances.v1`
- Purpose: Handles workflow messages from the events gateway

<Frame>
![Kafka Topic Configuration](https://s3.eu-west-1.amazonaws.com/docx.flowx.ai/4.6/Screenshot%202025-02-12%20at%2018.48.05.png)
</Frame>

<Warning>
Increase the `max.message.bytes` setting for the workflow instances topic to at least 10MB to handle large payloads.
</Warning>

<Accordion title="How to Update max.message.bytes Configuration">
You can update the `max.message.bytes` configuration using AKHQ or Kafka CLI:

**Using AKHQ:**
1. Access the AKHQ web interface in your browser
2. Log in if authentication is required
3. Navigate to the "Topics" section
4. Search for and select the topic (e.g., `ai.flowx.dev.eventsgateway.receive.workflowinstances.v1`)
5. Go to the "Configuration" tab
6. Locate the `max.message.bytes` setting (add it if not present)
7. Set the value to at least 10MB (10485760 bytes)
8. Save the changes
9. Confirm the configuration has been successfully updated

**Using Kafka CLI:**
```bash
kafka-configs.sh --bootstrap-server <broker-address> \
  --entity-type topics --entity-name ai.flowx.dev.eventsgateway.receive.workflowinstances.v1 \
  --alter --add-config max.message.bytes=10485760
```

<Info>
No restart is typically required as Kafka applies this setting dynamically in most cases. However, you may need to restart producers or consumers if they're caching topic configurations.
</Info>
</Accordion>

## Step 3: Set up authentication

Integration Designer uses OAuth2 for secure authentication and authorization. Configure the OAuth2 settings with these environment variables:

```yaml
# OAuth2 Authentication
- name: SECURITY_OAUTH2_BASE_SERVER_URL
  value: https://<keycloak-server>/auth
- name: SECURITY_OAUTH2_REALM
  value: flowx
- name: SECURITY_OAUTH2_CLIENT_CLIENT_ID
  value: integration-designer
- name: SECURITY_OAUTH2_CLIENT_CLIENT_SECRET
  valueFrom:
    secretKeyRef:
      name: integration-designer-secrets
      key: oauth2-client-secret

# Service Account for Admin Access
- name: SECURITY_OAUTH2_SERVICE_ACCOUNT_ADMIN_CLIENT_ID
  value: integration-designer-admin
- name: SECURITY_OAUTH2_SERVICE_ACCOUNT_ADMIN_CLIENT_SECRET
  valueFrom:
    secretKeyRef:
      name: integration-designer-secrets
      key: oauth2-admin-client-secret
```

<Card title="Access Management" href="./access-management/configuring-access-rights-for-integration-designer" icon="lock">
Learn more about configuring user roles and access rights for Integration Designer
</Card>

<Card title="Integration Designer Service Account" href="./access-management/configuring-an-iam-solution#integration-designer-service-account" icon="lock">
Configure the service account for Integration Designer
</Card>

## Step 4: Additional configuration

### WebClient buffer size

Integration Designer interacts with external APIs that may return large responses. Configure the buffer size to handle such payloads:

```yaml
# WebClient buffer size (10MB recommended for large API responses)
- name: FLOWX_WEBCLIENT_BUFFERSIZE
  value: "10485760"  # Default is 1MB (1048576)
```

<Tip>
If you encounter truncated API responses or unexpected errors when fetching large payloads, consider increasing the buffer size to at least 10MB.
</Tip>

### Logging configuration

Control the verbosity of logs with these environment variables:

```yaml
# Logging Configuration
- name: LOGGING_LEVEL_ROOT
  value: INFO  # Options: ERROR, WARN, INFO, DEBUG, TRACE
- name: LOGGING_LEVEL_APP
  value: INFO
```

### Configuration profile

Set the configuration profile to ensure proper loading of application properties:

```yaml
# Configuration profile
- name: CONFIG_PROFILE
  value: k8stemplate_v2,kafka-auth
```

## Step 5: Set up Kubernetes deployment

### RBAC configuration

Integration Designer requires specific permissions to access ConfigMaps and Secrets:

```yaml
rbac:
  create: true
  rules:
    - apiGroups:
        - ""
      resources:
        - secrets
        - configmaps
        - pods
      verbs:
        - get
        - list
        - watch
```

### Ingress configuration

Configure the admin ingress route for Integration Designer:

```yaml
ingress:
  enabled: true
  admin:
    enabled: true
    hostname: "{{ .Values.flowx.ingress.admin }}"
    path: /integration(/|$)(.*)
    annotations:
      nginx.ingress.kubernetes.io/rewrite-target: /$2
      nginx.ingress.kubernetes.io/cors-allow-headers: DNT,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,platform,Flowx-Platform
```

## Step 6: Set up monitoring

Enable Prometheus metrics for monitoring the service health and performance:

```yaml
# Prometheus Metrics
- name: MANAGEMENT_PROMETHEUS_METRICS_EXPORT_ENABLED
  value: "true"
```

<Tip>
Use tools like Grafana with Prometheus to create dashboards for monitoring the Integration Designer service.
</Tip>


## Troubleshoot common issues

<AccordionGroup>
<Accordion title="MongoDB connection fails">
**Problem**: Can't connect to MongoDB.

**Fix**:
- Check connection strings
- Verify credentials
- Ensure MongoDB is accessible (check network policies)
- Confirm MongoDB version is 4.4+
</Accordion>

<Accordion title="Kafka communication issues">
**Problem**: Messages aren't being sent or received.

**Fix**:
- Check Kafka bootstrap servers are reachable
- Verify topics exist with correct names
- Confirm `max.message.bytes` is set to at least 10MB
- Check authentication settings if using SASL
</Accordion>

<Accordion title="Authentication failures">
**Problem**: OAuth2 authentication doesn't work.

**Fix**:
- Verify OAuth2 server URL
- Check client ID and secret
- Ensure necessary roles are set up
- Test service account permissions
</Accordion>

<Accordion title="API responses are truncated">
**Problem**: Large API responses are cut off.

**Fix**:
- Increase WebClient buffer size to 10MB or more
- Use API pagination if available
- Consider streaming for very large responses
</Accordion>
</AccordionGroup>

## Next steps

After setup is complete:

1. [Configure external systems and endpoints](../docs/platform-deep-dive/integrations/integration-designer#managing-integration-endpoints)
2. [Build integration workflows](../docs/platform-deep-dive/integrations/integration-designer#workflows)
3. [Set up authorization](../docs/platform-deep-dive/integrations/integration-designer#configuring-authorization)
4. [Connect workflows to your processes](../docs/platform-deep-dive/integrations/integration-designer#workflow-integration)

<Card title="Integration Designer Guide" href="../docs/platform-deep-dive/integrations/integration-designer" icon="diagram-project">
Learn how to use Integration Designer
</Card>