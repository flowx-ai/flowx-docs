---
title: Deployment guidelines v4.1
---

<Info>
Do not forget, when upgrading to a new platform version, always ensure that your installed component versions match the versions specified in the release notes. To verify this, navigate to **FLOWX.AI Designer > Platform Status**.
</Info>

<Warning>
After updating to **4.1** FLOWX.AI release, it is not possible to import old process definitions into the new platform release (available for exports from releases **< 4.1**).
</Warning>

![](https://s3.eu-west-1.amazonaws.com/docx.flowx.ai/release-notes/release_platform_version_check.png)

## Component versions   

<Warning>
With the release of **FLOWX.AI 3.0**, there have been some changes that you need to be aware when upgrading to the latest version:
* The `flowx-process-renderer` has been migrated to `@flowx\ui-sdk`.
* As of **FlowX.AI 4.0** release version, the `paperflow-web-components` library is deprecated, removing the dependencies. Instead, the new components can be found in `@flowx/ui-toolkit`.
</Warning>


| Component                      | 4.1 | 4.0    | 3.4.7      | 3.4.6     | 3.4.5     | 3.4.4     | 3.4.3   | 3.4.2  | 3.4.1  | 3.4.0  | 3.3.0   | 3.2.0  | 3.1.0  | 3.0.0  |
| ------------------------------ | --- | ------ | ---------- | --------- | --------- | --------- | ------- | ------ | ------ | ------ | ------- | ------ | ------ | ------ |
| **process-engine**             |     | 5.10.3 | 4.3.5-2v11 | 4.3.5-2v6 | 4.3.5-2v2 | 4.3.5-2v1 | 4.3.5   | 4.3.2  | 4.3.1  | 4.1.0  | 3.6.0   | 2.2.1  | 2.1.2  | 2.0.7  |
| **admin**                      |     | 4.6.10 | 3.3.19-6   | 3.3.19-4  | 3.3.19-3  | 3.3.19-1  | 3.3.19  | 3.3.10 | 3.3.7  | 3.1.1  | 2.5.2   | 2.2.2  | 2.1.3  | 2.0.8  |
| **designer**                   |     | 4.0.1  | 3.35.18-5  | 3.35.18-3 | 3.35.18-2 | 3.35.18-1 | 3.35.18 | 3.35.9 | 3.35.6 | 3.33.2 | 3.28.11 | 3.21.1 | 3.15.1 | 3.2.1  |
| **@flowx/ui-sdk**              |     | 4.0.1  | 3.35.18-5  | 3.35.18-3 | 3.35.18-2 | 3.35.18-1 | 3.35.18 | 3.35.9 | 3.35.6 | 3.33.2 | 3.28.11 | 3.21.1 | 3.15.1 | 3.2.1  |
| **@flowx/ui-toolkit**          |     | 4.0.1  | 3.35.18-5  | 3.35.18-3 | 3.35.18-2 | 3.35.18-1 | 3.35.18 | 3.35.9 | 3.35.6 | 3.33.2 | 3.28.11 | 3.21.1 | 3.15.1 | 3.2.1  |
| **@flowx/ui-theme**            |     | 4.0.1  | 3.35.18-5  | 3.35.18-3 | 3.35.18-2 | 3.35.18-1 | 3.35.18 | 3.35.9 | 3.35.6 | 3.33.2 | 3.28.11 | 3.21.1 | 3.15.1 | 3.2.1  |
| **paperflow-web-components**   | -   | -      | 3.35.18-5  | 3.35.18-3 | 3.35.18-2 | 3.35.18-1 | 3.35.18 | 3.35.9 | 3.35.6 | 3.33.2 | 3.28.11 | 3.21.1 | 3.15.1 | 3.2.1  |
| **flowx-process-renderer**     | -   | -      | -          | -         | -         | -         | -       | -      | -      | -      | -       | -      | -      | -      |
| **cms-core**                   |     | 2.2.5  | 1.3.9      | 1.3.9     | 1.3.9     | 1.3.9     | 1.3.9   | 1.3.9  | 1.3.9  | 1.3.6  | 1.3.0   | 1.2.0  | 1.0.3  | 1.0.2  |
| **scheduler-core**             |     | 2.1.4  | 1.2.4      | 1.2.4     | 1.2.4     | 1.2.4     | 1.2.4   | 1.2.4  | 1.2.4  | 1.1.0  | 1.0.4   | 1.0.4  | 1.0.4  | 1.0.1  |
| **events-gateway**             |     | 2.0.4  | 1.1.0      | 1.1.0     | 1.1.0     | 1.1.0     | 1.1.0   | 1.1.0  | 1.1.0  | 1.0.6  | 1.0.2   | -      | -      | -      |
| **notification-plugin**        |     | 3.0.6  | 2.0.9      | 2.0.9     | 2.0.9     | 2.0.9     | 2.0.9   | 2.0.8  | 2.0.8  | 2.0.5  | 2.0.4   | 2.0.4  | 2.0.3  | 2.0.1  |
| **document-plugin**            |     | 3.0.6  | 2.0.10-1   | 2.0.10    | 2.0.10    | 2.0.10    | 2.0.10  | 2.0.8  | 2.0.8  | 2.0.6  | 2.0.4   | 2.0.3  | 2.0.3  | 2.0.2  |
| **ocr-plugin**                 |     | 1.0.17 | 1.0.15     | 1.0.12    | 1.0.12    | 1.0.12    | 1.0.12  | 1.0.12 | 1.0.12 | 1.0.8  | 1.0.8   | 1.0.2  | 0.1.33 | 0.1.33 |
| **license-core**               |     | 2.0.5  | 1.1.0      | 1.0.7     | 1.0.7     | 1.0.7     | 1.0.7   | 1.0.7  | 1.0.7  | 1.0.4  | 1.0.2   | 1.0.2  | 1.0.2  | 1.0.1  |
| **customer-management-plugin** |     | 1.0.6  | 0.2.8      | 0.2.8     | 0.2.8     | 0.2.8     | 0.2.8   | 0.2.8  | 0.2.8  | 0.2.6  | 0.2.4   | 0.2.3  | 0.2.3  | 0.2.1  |
| **task-management-plugin**     |     | 4.0.5  | 3.0.3      | 3.0.3     | 3.0.3     | 3.0.3     | 3.0.3   | 3.0.3  | 3.0.3  | 3.0.0  | 2.1.2   | 1.0.4  | 1.0.4  | 1.0.1  |
| **data-search**                |     | 1.0.6  | 0.2.8      | 0.2.8     | 0.2.8     | 0.2.6     | 0.2.6   | 0.2.6  | 0.2.6  | 0.2.3  | 0.2.0   | 0.1.4  | 0.1.4  | 0.1.3  |
| **audit-core**                 |     | 3.1.4  | 2.2.0      | 2.2.0     | 2.2.0     | 2.2.0     | 2.2.0   | 2.1.3  | 2.1.3  | 2.1.0  | 1.0.6   | 1.0.5  | 1.0.4  | 1.0.1  |
| **reporting-plugin**           |     | 0.1.5  | 0.1.2      | 0.1.2     | 0.1.2     | 0.1.2     | 0.1.2   | 0.1.2  | 0.1.2  | 0.1.2  | 0.0.40  | 0.0.40 | 0.0.40 | 0.0.39 |
| **advancing-controller**       |     | 1.1.4  | 0.3.5-1    | 0.3.5     | 0.3.5     | 0.3.5     | 0.3.5   | 0.3.5  | 0.3.5  | 0.3.2  | 0.3.0   | 0.1.4  | 0.1.4  | 0.1.2  |
| **iOS renderer**               |     | 3.0.0  | 2.3.0      | 2.3.0     | 2.3.0     | 2.3.0     | 2.3.0   | 2.3.0  | 2.3.0  | 2.3.0  | 2.1.0   | 2.0.1  | 2.0.0  | 2.0.0  |
| **Android renderer**           |     | 3.0.0  | 2.1.4      | 2.1.4     | 2.1.4     | 2.1.4     | 2.1.4   | 2.1.4  | 2.1.4  | 2.1.4  | 2.0.1   | 2.0.1  | 2.0.1  | 2.0.1  |




### Recommended Versions for FlowX.AI 4.1

| FLOWX.AI Platform Version | Component name    | Recommended version (tested versions) |
| ------------------------- | ----------------- | ------------------------------------- |
| 4.1                       | Keycloak          | 22.0.x                                |
| 4.1                       | Kafka             | 3.2.3                                 |
| 4.1                       | PostgreSQL        | 16.2.0                                |
| 4.1                       | MongoDB           | 7.0.6                                 |
| 4.1                       | Redis             | 7.2.4                                 |
| 4.1                       | Elasticsearch     | 7.17                                  |
| 4.1                       | OracleDB          | 19.8.0.0.0                            |
| 4.1                       | Angular (Web SDK) | 16.0.0                                |




<Info>
FlowX.AI supports any version of the listed third-party components as prerequisites.

For optimal performance and reliability, our internal QA process validates new releases using specific versions as indicated in the provided table.
While exploring alternative versions that suit your company's specific requirements, we recommend referring to the compatibility matrix for guidance.

In the unlikely event that you encounter any compatibility issues with FlowX.AI, please open a support ticket [**here**](https://support.flowx.ai/), and our dedicated team will address and resolve any identified bugs following our standard support process.

Compatibility Matrix:

* FlowX.AI Platform: Recommended and tested versions
* Third-Party Components: Supported versions based on specific requirements and client preferences
</Info>

## Additional configuration

### Misconfigurations

To enable and to compute warnings for already existing processes from previous versions, the following endpiont must be used:

<Info>
Please note that it may take some time for all misconfigurations in older processes to become available on the platform after calling this endpoint.
</Info>

```json
{{baseUrlAdmin}}/api/process-versions/compute
```

<ParamField path="baseUrlAdmin" type="string">
The URL of admin.
</ParamField>

<ParamField body="api" type="string" >

</ParamField>

<ParamField body="process-versions" type="string">

</ParamField>

<ParamField body="compute" type="string">
This is the specific operation  performed to compute misconfigurations for older processes. 
</ParamField>

### Springboot upgrade

The provided configuration changes pertain to upgrading your Spring Boot application to version 3.2.x. Below is a detailed explanation of each section in the context of this upgrade:


<Info>
Note that this setup is backwards compatible, it does not affect the configuration from v3.4.x. The configuration files use the old environment variables as placeholders for these values.
</Info>

#### Redis configuration

In version 4.1, you need to configure Redis using  the following environment variables. 

```yaml
spring:
[...]
  data:
    redis:
      host: ${spring.redis.host}
      port: ${spring.redis.port}
      password: ${spring.redis.password}
```

The corresponding environment variables are:

* `SPRING_DATA_REDIS_HOST`
* `SPRING_DATA_REDIS_PORT`
* `SPRING_DATA_REDIS_PASSWORD`

#### Management configuration

For managing microservices metrics, especially exporting metrics to Prometheus, the following configuration is used:

```yaml
management:
[...]
  prometheus:
    metrics:
      export:
        enabled: ${management.metrics.export.prometheus.enabled}
```
The related environment variable is:

* `MANAGEMENT_PROMETHEUS_METRICS_EXPORT_ENABLED`

#### Authentication

For OAuth2 resource server configuration, especially when using an opaque token, the following setup is provided:

```yaml
spring:
  security:
    oauth2:
      resource-server:
        opaque-token:
          introspection-uri: ${security.oauth2.base-server-url}/realms/${security.oauth2.realm}/protocol/openid-connect/token/introspect
          client-id: ${security.oauth2.client.client-id}
          client-secret: ${security.oauth2.client.client-secret}
```
The environment variables involved are:

* `SPRING_SECURITY_OAUTH2_RESOURCE_SERVER_OPAQUE_TOKEN_INTROSPECTION_URI`
* `SPRING_SECURITY_OAUTH2_RESOURCE_SERVER_OPAQUE_TOKEN_CLIENT_ID`
* `SPRING_SECURITY_OAUTH2_RESOURCE_SERVER_OPAQUE_TOKEN_CLIENT_SECRET`

```yaml
security:
[...]
  oauth2:
    base-server-url: #left empty on purpose
    realm: #left empty on purpose
    client:
      access-token-uri: ${security.oauth2.base-server-url}/realms/${security.oauth2.realm}/protocol/openid-connect/token
      client-id: #left empty on purpose
      client-secret: #left empty on purpose
```


#### Elasticsearch configuration


```yaml
spring:
  elasticsearch:
    rest:
      uris: localhost:9200 #no protocol/schema anymore
```
The relevant environment variable is:

* `SPRING_ELASTICSEARCH_REST_URIS`: The uris field is used to define the addresses of your Elasticsearch instances.

<Info>
- The protocol (http:// or https://) is now no longer needed like in 3.x version:
```yaml
spring:
  elasticsearch:
    rest:
      uris: http://localhost:9200
```
</Info>

This change reflects the new way of specifying Elasticsearch URIs in 4.1, which no longer requires a protocol/schema like in v3.x.
### License core configuration

The License core microservice needs to configure two different data sources: one for the engine database and one for the license database.

#### Engine database source

```yaml
spring:
  datasource:
    engine:
      type: com.zaxxer.hikari.HikariDataSource
      driver-class-name: org.postgresql.Driver

      url: ${engine.datasource.jdbc-url}
      jdbc-url: ${engine.datasource.jdbc-url}
      username: ${engine.datasource.username:postgres}
      password: ${engine.datasource.password:wrongpwd}

      maximum-pool-size: 10
      minimum-idle: 1
      connection-timeout: 30000
      leak-detection-threshold: 10000
```

#### License database source

```yaml
spring:
  datasource:
    license:
      url: ${spring.datasource.jdbc-url}
      jdbc-url: ${spring.datasource.jdbc-url}
      driver-class-name: org.postgresql.Driver
      username: ${spring.datasource.username}
      password: ${spring.datasource.password}
```

In these configurations, the placeholders like `${engine.datasource.jdbc-url}` and `${spring.datasource.jdbc-url}` are used to inject environment-specific values, allowing for greater flexibility and ease of configuration management.